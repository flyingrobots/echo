<!-- SPDX-License-Identifier: Apache-2.0 OR MIND-UCAL-1.0 -->
<!-- © James Ross Ω FLYING•ROBOTS <https://github.com/flyingrobots> -->

# F2.5: SHA-256 to BLAKE3 Coordination

Cross-repo planning task. Wesley currently uses SHA-256 for schema hashing. Echo uses BLAKE3. This task produces the migration specification, not the implementation.

## T-2-5-1: SHA-256 to BLAKE3 migration spec

**User Story:** As a cross-project architect, I want a written migration plan for switching Wesley from SHA-256 to BLAKE3 so that both repos use the same hash algorithm and the transition is safe.

**Requirements:**

- R1: Document the current SHA-256 usage points in Wesley (schema hash, IR signature, generated code).
- R2: Document the current BLAKE3 usage points in Echo (state_root, commit_id, CAS, ident).
- R3: Define a dual-hash transition period: Wesley emits both `schema_sha256` and `schema_blake3` fields; Echo consumers prefer BLAKE3 when available.
- R4: Define the cutover criteria (when SHA-256 fields can be removed).
- R5: Identify breaking changes and version bumps required in both repos.
- R6: Produce the spec as a markdown document in `docs/spec-hash-migration.md` in the Echo repo.

**Acceptance Criteria:**

- [ ] AC1: Spec document exists at `docs/spec-hash-migration.md`.
- [ ] AC2: Spec lists every SHA-256 call site in Wesley (verified by grep).
- [ ] AC3: Spec lists every BLAKE3 call site in Echo (verified by grep).
- [ ] AC4: Dual-hash transition protocol is defined with concrete field names and version tags.
- [ ] AC5: Spec reviewed by maintainers of both repos.

**Definition of Done:**

- [ ] Code reviewed and merged
- [ ] Tests pass (CI green)
- [ ] Documentation updated (if applicable)

**Scope:** Repo: Echo (spec document). Cross-repo audit of both Wesley and Echo hash usage.
**Out of Scope:** Actual implementation of BLAKE3 in Wesley. Actual removal of SHA-256. Performance benchmarking of BLAKE3 vs SHA-256 in Node.js.

**Test Plan:**

- **Goldens:** N/A (specification document).
- **Failures:** N/A.
- **Edges:** N/A.
- **Fuzz/Stress:** N/A.

**Blocked By:** none
**Blocking:** none

**Est. Hours:** 4h
**Expected Complexity:** ~0 LoC (prose specification only)

---
