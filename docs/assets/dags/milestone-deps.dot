// SPDX-License-Identifier: Apache-2.0
// © James Ross Ω FLYING•ROBOTS <https://github.com/flyingrobots>
digraph echo_milestone_dependencies {
  graph [rankdir=LR, labelloc="t", fontsize=18, fontname="Helvetica", splines=true];
  node  [shape=box, style="rounded,filled", fontname="Helvetica", fontsize=12, margin="0.14,0.10"];
  edge  [fontname="Helvetica", fontsize=10, arrowsize=0.8];
  label="Echo — Milestone Dependency Sketch\nEdge direction: prerequisite → dependent (do tail before head)\nEdge styles encode confidence (solid=strong, dashed=medium, dotted=weak).";

  subgraph cluster_legend {
    label="Legend";
    color="gray70";
    fontcolor="gray30";
    style="rounded";
    L1 [label="strong", fillcolor="#ffffff"];
    L2 [label="medium", fillcolor="#ffffff"];
    L3 [label="weak", fillcolor="#ffffff"];
    L1 -> L2 [arrowhead=none, color="black", penwidth=1.4, style="solid"];
    L2 -> L3 [arrowhead=none, color="gray40", penwidth=1.2, style="dashed"];
  }

  m1C [label="1C – Rhai/TS Bindings", fillcolor="#dcfce7", tooltip="1C – Rhai/TS Bindings", URL="https://github.com/flyingrobots/echo/milestone/3"];
  m1E [label="1E – Networking & Confluence MVP", fillcolor="#ffedd5", tooltip="1E – Networking & Confluence MVP", URL="https://github.com/flyingrobots/echo/milestone/5"];
  mS1 [label="S1 – Deterministic Rhai Surface", fillcolor="#ede9fe", tooltip="S1 – Deterministic Rhai Surface", URL="https://github.com/flyingrobots/echo/milestone/18"];
  mTT0 [label="TT0 – Time Model Spec Lock", fillcolor="#dbeafe", tooltip="TT0 – Time Model Spec Lock", URL="https://github.com/flyingrobots/echo/milestone/21"];
  mTT1 [label="TT1 – Streams Inspector Frame", fillcolor="#dbeafe", tooltip="TT1 – Streams Inspector Frame", URL="https://github.com/flyingrobots/echo/milestone/15"];
  mTT2 [label="TT2 – Time Travel MVP", fillcolor="#dbeafe", tooltip="TT2 – Time Travel MVP", URL="https://github.com/flyingrobots/echo/milestone/16"];
  mTT3 [label="TT3 – Rulial Diff / Worldline Compare", fillcolor="#dbeafe", tooltip="TT3 – Rulial Diff / Worldline Compare", URL="https://github.com/flyingrobots/echo/milestone/17"];
  mW1 [label="W1 – Wesley as a Boundary Grammar", fillcolor="#ccfbf1", tooltip="W1 – Wesley as a Boundary Grammar", URL="https://github.com/flyingrobots/echo/milestone/19"];

  mTT0 -> mTT1 [color="black", penwidth=1.4, style="solid", tooltip="time model unlocks inspector frame"];
  mTT0 -> mTT2 [color="black", penwidth=1.4, style="solid", tooltip="time model unlocks time travel MVP"];
  mTT1 -> mTT2 [color="black", penwidth=1.4, style="solid", tooltip="inspector frame supports time travel UX"];
  mTT0 -> mTT3 [color="black", penwidth=1.4, style="solid", tooltip="time model unlocks worldline compare"];
  m1C -> mS1 [color="black", penwidth=1.4, style="solid", tooltip="bindings needed for deterministic Rhai"];
  m1E -> mS1 [color="black", penwidth=1.4, style="solid", tooltip="security contexts constrain sandbox"];
  mTT0 -> mS1 [color="gray40", penwidth=1.2, style="dashed", tooltip="deterministic time model likely needed"];
  mW1 -> mS1 [color="gray70", penwidth=1.2, style="dotted", tooltip="boundary grammar maybe needed"];
}
